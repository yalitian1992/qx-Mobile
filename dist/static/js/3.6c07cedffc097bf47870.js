webpackJsonp([3],{"68EA":function(t,i){},KR8f:function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});e("rxR/");var s={render:function(){var t=this.$createElement;return(this._self._c||t)("a",{staticClass:"alink",attrs:{href:this.to,target:"_blank"}},[this._t("default")],2)},staticRenderFns:[]};var o={name:"vue-waterfall-easy",components:{alink:e("VU/8")({name:"alink",props:["to"],data:function(){return{msg:"this is from alink.vue"}},methods:{}},s,!1,function(t){e("68EA")},null,null).exports},props:{width:{type:Number},height:{type:Number},reachBottomDistance:{type:Number,default:0},loadingDotCount:{type:Number,default:3},loadingDotStyle:{type:Object,default:null},gap:{type:Number,default:20},mobileGap:{type:Number,default:8},maxCols:{type:Number,default:5},imgsArr:{type:Array,required:!0,default:[]},srcKey:{type:String,default:"src"},hrefKey:{type:String,default:"href"},imgWidth:{type:Number,default:240},isRouterLink:{type:Boolean,default:!1},linkRange:{type:String,default:"card"},loadingTimeOut:{type:Number,default:500}},data:function(){return{msg:"this is from vue-waterfall-easy.vue",isMobile:!!navigator.userAgent.match(/(iPhone|iPod|Android|ios)/i),isPreloading:!0,isPreloading_c:!0,imgsArr_c:[],loadedCount:0,cols:NaN,imgBoxEls:null,beginIndex:0,colsHeightArr:[],LoadingTimer:null,isFirstLoad:!0}},computed:{colWidth:function(){return this.imgWidth+this.gap},imgWidth_c:function(){return this.isMobile?window.innerWidth/2-this.mobileGap:this.imgWidth},hasLoadingSlot:function(){return!!this.$scopedSlots.loading}},mounted:function(){var t=this;this.bindClickEvent(),this.loadingMiddle(),this.preload(),this.cols=this.calcuCols(),this.$on("preloaded",function(){t.isFirstLoad=!1,t.imgsArr_c=t.imgsArr.concat([]),t.$nextTick(function(){t.isPreloading=!1,t.imgBoxEls=t.$el.getElementsByClassName("img-box"),t.waterfall()})}),this.isMobile||this.width||this.response(),this.scroll()},watch:{isPreloading:function(t,i){var e=this;t?setTimeout(function(){e.isPreloading&&(e.isPreloading_c=!0)},this.loadingTimeOut):this.isPreloading_c=!1},imgsArr:function(t,i){i.length>0&&t[0]&&!t[0]._height&&this.reset(),this.preload()}},methods:{preload:function(t,i){var e=this;this.imgsArr.forEach(function(t,i){if(!(i<e.loadedCount)){if(!t[e.srcKey])return e.imgsArr[i]._height="0",void e.loadedCount++;var s=new Image;s.src=t[e.srcKey],s.onload=s.onerror=function(t){e.loadedCount++,e.imgsArr[i]._height="load"==t.type?Math.round(e.imgWidth_c/(s.width/s.height)):"0",e.loadedCount==e.imgsArr.length&&e.$emit("preloaded")}}})},calcuCols:function(){var t=this.width?this.width:window.innerWidth,i=parseInt(t/this.colWidth);return i=0===i?1:i,this.isMobile?2:i>this.maxCols?this.maxCols:i},waterfall:function(){if(this.imgBoxEls){var t,i,e,s=this.isMobile?this.imgBoxEls[0].offsetWidth:this.colWidth;0==this.beginIndex&&(this.colsHeightArr=[]);for(var o=this.beginIndex;o<this.imgsArr.length;o++){if(!this.imgBoxEls[o])return;if(e=this.imgBoxEls[o].offsetHeight,o<this.cols)this.colsHeightArr.push(e),t=0,i=o*s;else{var r=Math.min.apply(null,this.colsHeightArr),n=this.colsHeightArr.indexOf(r);t=r,i=n*s,this.colsHeightArr[n]=r+e}this.imgBoxEls[o].style.left=i+"px",this.imgBoxEls[o].style.top=t+"px"}this.beginIndex=this.imgsArr.length}},response:function(){var t=this;window.addEventListener("resize",function(){var i=t.cols;t.cols=t.calcuCols(),i!==t.cols&&(t.beginIndex=0,t.waterfall())})},scroll:function(){var t=this,i=this.$el.querySelector(".vue-waterfall-easy-scroll");i.addEventListener("scroll",function(){if(!t.isPreloading){var e=Math.min.apply(null,t.colsHeightArr);i.scrollTop+i.offsetHeight>e-t.reachBottomDistance&&(t.isPreloading=!0,t.$emit("scrollReachBottom"))}})},bindClickEvent:function(){var t=this;this.$el.querySelector(".vue-waterfall-easy").addEventListener("click",function(i){var e=i.target;if(-1==e.className.indexOf("img-box")){for(;-1==e.className.indexOf("img-inner-box");)e=e.parentNode;var s=e.getAttribute("data-index");t.$emit("click",i,{index:s,value:t.imgsArr_c[s]})}})},loadingMiddle:function(){var t=this.$el.querySelector(".vue-waterfall-easy-scroll"),i=t.offsetWidth-t.clientWidth;this.$el.querySelector(".loading").style.marginLeft=-i/2+"px"},reset:function(){this.imgsArr_c=[],this.beginIndex=0,this.loadedCount=0,this.isFirstLoad=!0,this.isPreloading=!0}}},r={render:function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"vue-waterfall-easy-container",style:{width:t.width&&!t.isMobile?t.width+"px":"",height:t.height?t.height+"px":""}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.isPreloading_c,expression:"isPreloading_c"}],staticClass:"loading ball-beat",class:{first:t.isFirstLoad}},[t._t("loading",null,{isFirstLoad:t.isFirstLoad}),t._l(t.loadingDotCount,function(i){return t.hasLoadingSlot?t._e():e("div",{staticClass:"dot",style:t.loadingDotStyle})})],2),e("div",{staticClass:"vue-waterfall-easy-scroll"},[t._t("waterfall-head"),e("div",{staticClass:"vue-waterfall-easy",style:t.isMobile?"":{width:t.colWidth*t.cols+"px",left:"50%",marginLeft:-1*t.colWidth*t.cols/2+"px"}},t._l(t.imgsArr_c,function(i,s){return e("div",{staticClass:"img-box",style:{padding:(t.isMobile?t.mobileGap:t.gap)/2+"px",width:t.isMobile?"":t.colWidth+"px"}},[e(t.isRouterLink?"router-link":"alink",{tag:"component",staticClass:"img-inner-box",attrs:{"data-index":s,to:"card"==t.linkRange&&i[t.hrefKey]}},[i[t.srcKey]?e(t.isRouterLink?"router-link":"alink",{tag:"component",staticClass:"img-wraper",style:{width:t.imgWidth_c+"px",height:!!i._height&&i._height+"px"},attrs:{to:"img"==t.linkRange&&i[t.hrefKey]}},[e("img",{attrs:{src:i[t.srcKey]}})]):t._e(),t._t("default",null,{index:s,value:i})],2)],1)}))],2)])},staticRenderFns:[]};e("VU/8")(o,r,!1,function(t){e("Yav7")},"data-v-e0d56564",null).exports,e("7QTg"),e("dOCX");var n=[{property:0,name:"已送出"},{property:1,name:"赠送中"}],a=[{choose:0,name:"全新"},{choose:1,name:"同城"}],l=[{sort:-1,name:"默认排序"},{sort:0,name:"按发布时间"},{sort:1,name:"按收藏热度"},{sort:2,name:"按果冻数从高到低"},{sort:3,name:"按果冻数从低到高"}],c={name:"filterBox",props:{isShow:{type:Boolean,default:!1}},data:function(){var t=this.isShow;return{goodsAttrs:n,chooses:a,goodsSortList:l,currentSort:void 0,currentAttr:void 0,currentChoose:[],isPopup:t}},watch:{isShow:function(t){this.isPopup=t}},mounted:function(){},methods:{handleSortItem:function(t){this.currentSort=t.sort},handleAttrItem:function(t){this.currentAttr===t.property?this.currentAttr=void 0:this.currentAttr=t.property},handleChooseItem:function(t,i){void 0!==this.currentChoose[i]&&-1!==this.currentChoose[i]?this.currentChoose.splice(i,1,-1):(this.currentChoose[i]=0,this.currentChoose.splice(i,1,t.choose))},resetSort:function(){var t=this;[].concat(this.currentChoose).forEach(function(){t.currentChoose.pop()}),this.currentAttr=void 0,this.currentSort=void 0},handleConfirmSort:function(){var t=this.currentSort,i=this.currentAttr,e=this.currentChoose;this.$emit("onSort",{sort:t,property:i,choose:e.toString()}),this.closePop()},closePop:function(){this.isPopup=!1,this.$emit("update:isShow",this.isPopup)}}},h={render:function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("transition",{attrs:{name:"filter-fade"}},[t.isPopup?e("div",{ref:"filterList",staticClass:"filter-list"},[e("div",{staticClass:"mask",on:{click:t.closePop}}),t._v(" "),e("div",{staticClass:"filterBox"},[e("div",{staticClass:"goods-filter-box"},[e("div",{staticClass:"goods-attr select"},[e("span",{staticClass:"title"},[t._v("宝贝属性")]),t._v(" "),e("div",{staticClass:"attr-type"},t._l(t.goodsAttrs,function(i,s){return e("button",{key:s,class:["btn",i.property===t.currentAttr?"active":null],attrs:{type:"button"},on:{click:function(e){t.handleAttrItem(i)}}},[t._v(t._s(i.name))])}))]),t._v(" "),e("div",{staticClass:"features-select select"},[e("span",{staticClass:"title"},[t._v("特色选择")]),t._v(" "),e("div",{staticClass:"attr-type"},t._l(t.chooses,function(i,s){return e("button",{key:s,class:["btn",t.currentChoose[s]===i.choose?"active":null],attrs:{type:"button"},on:{click:function(e){t.handleChooseItem(i,s)}}},[t._v(t._s(i.name))])}))]),t._v(" "),e("div",{staticClass:"goods-sort"},[e("span",{staticClass:"title"},[t._v("宝贝筛选")]),t._v(" "),e("ul",{staticClass:"sort-list"},t._l(t.goodsSortList,function(i,s){return e("li",{key:s,class:["sort-item",i.sort===t.currentSort?"active":null],on:{click:function(e){t.handleSortItem(i)}}},[e("span",[t._v(t._s(i.name))]),t._v(" "),i.sort===t.currentSort?e("span",{staticClass:"icon-sort-item-select"}):t._e()])}))]),t._v(" "),e("div",{staticClass:"operation"},[e("button",{staticClass:"btn btn-reset",on:{click:t.resetSort}},[t._v("重置")]),t._v(" "),e("button",{staticClass:"btn btn-confirm",on:{click:t.handleConfirmSort}},[t._v("完成")])])])])]):t._e()])},staticRenderFns:[]};e("VU/8")(c,h,!1,function(t){e("YWW3")},"data-v-418ed6e0",null).exports,e("v2ns");throw new Error('Cannot find module "~/goodsList/"')},YWW3:function(t,i){},Yav7:function(t,i){},c0SY:function(t,i){}});
//# sourceMappingURL=3.6c07cedffc097bf47870.js.map